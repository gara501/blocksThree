!function(t){function e(e){for(var s,a,r=e[0],h=e[1],c=e[2],l=0,u=[];l<r.length;l++)a=r[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&u.push(n[a][0]),n[a]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(t[s]=h[s]);for(d&&d(e);u.length;)u.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,r=1;r<i.length;r++){var h=i[r];0!==n[h]&&(s=!1)}s&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var s={},n={0:0},o=[];function a(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=s,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=h;o.push([4,1]),i()}({4:function(t,e,i){"use strict";i.r(e);var s=i(1),n=i(0),o=i(2);const a="START",r="CLICK",h="GAME_OVER",c="STACK",d="NEW_GAME",l="UPDATE_POINTS";var u=new(i.n(o).a);let p=0;var g=()=>{const t=[1752220,3805367,15062132,2603517,12237164,4646588,11128439,2541292,274845,12457102,13782057,12252592,3795093];return p++,t[p%t.length]};class m extends s.f{constructor({width:t,height:e,alt:i=40,color:n}){super(),this.geometry=new s.a(t,i,e),this.material=new s.g({color:n,flatShading:!0,roughness:.15}),this.material.color.convertSRGBToLinear(),this.color=n,this.dimension={width:t,height:e}}}var w=m;var x=class extends w{constructor({width:t,height:e,last:i}){super({width:t,height:e,color:g()}),this.last=i;const s=i.geometry.parameters.height/2,n=this.geometry.parameters.height/2;this.position.y=i.position.y+s+n,this.maxPosition=360,this.isStopped=!1,this.direction=1,this.velocity=4,this.currentAxis=Math.random()>=.5?"x":"z",this.invertedAxis="x"===this.currentAxis?"z":"x",this.position[this.currentAxis]-=this.maxPosition*this.direction,this.position[this.invertedAxis]=i.position[this.invertedAxis]}place(){const t="x"===this.currentAxis?"width":"height",e=this.position[this.currentAxis]-this.last.position[this.currentAxis],i=this.last.dimension[t]-Math.abs(e);if(i>0){const s=this.last.dimension[t]-i,n={base:{width:"width"===t?i:this.dimension.width,height:"height"===t?i:this.dimension.height},cut:{width:"width"===t?s:this.dimension.width,height:"height"===t?s:this.dimension.height},color:this.color,axis:this.currentAxis,lastPosition:this.position,direction:e/Math.abs(e)|1};u.emit(c,n)}else u.emit(h)}update(){this.isStopped||(this.position[this.currentAxis]+=this.direction*this.velocity,Math.abs(this.position[this.currentAxis])>=this.maxPosition&&(this.direction*=-1))}};var b=class{constructor(t){this.base=new w({width:t.base.width,height:t.base.height,color:t.color});const e=t.cut.width/2*t.direction,i=t.cut.height/2*t.direction;this.base.position.set("x"===t.axis?t.lastPosition.x-e:t.lastPosition.x,t.lastPosition.y,"z"===t.axis?t.lastPosition.z-i:t.lastPosition.z),this.cut=new w({width:t.cut.width,height:t.cut.height,color:t.color});const s=t.base.width/2*t.direction,n=t.base.height/2*t.direction;this.cut.position.set("x"===t.axis?t.lastPosition.x+s:t.lastPosition.x,t.lastPosition.y,"z"===t.axis?t.lastPosition.z+n:t.lastPosition.z)}getBase(){return this.base}getCut(){return this.cut}};var v=class{constructor(){this.points=document.getElementById("points"),this.buttonStart=document.getElementById("button-start"),this.gameOver=document.getElementById("gameover"),this.events()}events(){this.buttonStart.addEventListener("click",t=>{u.emit(a)}),u.on(d,()=>{this.buttonStart.style.top="30%",this.buttonStart.classList.add("animate__fadeInDown")}),u.on(a,()=>{this.buttonStart.classList.add("animate__fadeOutUp"),this.points.style.top="30%",this.points.classList.add("animate__fadeInDown"),this.gameOver.classList.add("animate__fadeOutDown")}),u.on(l,t=>{this.points.innerHTML=t}),u.on(h,()=>{this.points.style.top="25%",this.gameOver.style.top="35%",this.gameOver.classList.remove("animate__fadeOutDown"),this.gameOver.classList.add("animate__fadeInUp")})}};class f extends s.i{constructor(){super();new v;this.background=new s.b("skyblue").convertSRGBToLinear(),this.stackPoints=0,this.gameOver=!0,this.create(),this.events()}create(){this.baseCube=new w({width:200,height:200,alt:200,color:2899536}),this.add(this.baseCube),this.boxesGroup=new s.d,this.add(this.boxesGroup);const t=new s.e(16777147,526368,.5),e=new s.c(16777215,1);this.add(e,t)}newBox({width:t,height:e,last:i}){console.log(i);const s=new x({width:t,height:e,last:i});this.boxesGroup.add(s)}resetGroup(){this.boxesGroup.children.map((t,e)=>{new n.Tween(t.scale).to({x:.5,y:.5,z:.5},80*e).easing(n.Easing.Quadratic.Out).onComplete(()=>{this.boxesGroup.remove(t)}).start()})}events(){u.emit(d),u.on(r,()=>{this.gameOver?u.emit(a):this.getLastBox().place()}),u.on(a,()=>{this.resetGroup(),u.emit(l,this.stackPoints),this.newBox({width:200,height:200,last:this.baseCube}),this.gameOver=!1}),u.on(c,t=>{this.stackPoints++,u.emit(l,this.stackPoints),this.boxesGroup.remove(this.getLastBox());const e=new b(t);this.boxesGroup.add(e.getBase()),this.add(e.getCut());new n.Tween(e.getCut().position).to({[t.axis]:e.getCut().position[t.axis]+200*t.direction},500).easing(n.Easing.Quadratic.Out).start(),e.getCut().material.transparent=!0;new n.Tween(e.getCut().material).to({opacity:0},600).easing(n.Easing.Quadratic.Out).onComplete(()=>{this.remove(e.getCut())}).start(),this.newBox({width:t.base.width,height:t.base.height,last:this.getLastBox()})}),u.on(h,()=>{if(!this.gameOver){this.stackPoints=0;new n.Tween(this.getLastBox().position).to({y:this.getLastBox().position.y+300},1e3).easing(n.Easing.Bounce.Out).start()}this.gameOver=!0})}getLastBox(){return this.boxesGroup.children[this.boxesGroup.children.length-1]}update(){n.update(),this.gameOver||this.getLastBox().update()}}var y=f;const P=document.querySelector("#game-container"),O=new class{constructor(t){this.container=t,this.cameraPanUp=40,this.cameraY=300,this.scene=new y,this.camera=new s.h(this.container.clientWidth/-2,this.container.clientWidth/2,this.container.clientHeight/2,this.container.clientHeight/-2,-1e3,1e3),this.camera.position.set(10,10+this.cameraY,10),this.camera.lookAt(0,this.cameraY,0),this.renderer=new s.j({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=s.k,this.renderer.physicallyCorrectLights=!0,this.container.appendChild(this.renderer.domElement),this.onResize(),this.render(),this.events()}events(){u.on(c,()=>{this.cameraY+=this.cameraPanUp;new n.Tween(this.camera.position).to({y:10+this.cameraY},500).easing(n.Easing.Sinusoidal.In).start()}),u.on(a,()=>{this.cameraY=300,this.camera.position.set(10,10+this.cameraY,10),this.camera.lookAt(0,this.cameraY,0);new n.Tween(this.camera).to({zoom:1},800).easing(n.Easing.Sinusoidal.In).onUpdate(()=>{this.camera.updateProjectionMatrix()}).start()}),u.on(h,()=>{new n.Tween(this.camera).to({zoom:.6},700).easing(n.Easing.Quadratic.Out).onUpdate(()=>{this.camera.updateProjectionMatrix()}).start()})}onResize(){this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.camera.left=this.container.clientWidth/-2,this.camera.right=this.container.clientWidth/2,this.camera.top=this.container.clientHeight/2,this.camera.bottom=this.container.clientHeight/-2,this.camera.updateProjectionMatrix()}render(){this.renderer.render(this.scene,this.camera),this.scene.update(),this.renderer.setAnimationLoop(()=>this.render())}}(P);window.addEventListener("resize",()=>{O.onResize()}),P.addEventListener("click",()=>{u.emit(r)})}});